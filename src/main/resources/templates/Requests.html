<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Requests List</title>
    <link href="../static/style2.css" th:href="@{/style2.css}" rel="stylesheet" />
    <link rel="stylesheet"
          href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          inherity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJLSAwiGgFAW/dAiS6JXm"
          crossorigin="änonymous">

<body>
<header>
    <h1 class="heading">My Application List</h1>
<div class="row2">
    <div class="row d-flex justify-content-center">
        <div class="table-container">

            <div id="MyRequests"></div>
             <table class="table" id="display">
                 <thead>
                 <th>Βαθμός</th>
                 <th>Όνομα καθηγητή</th>
                 <th>Κατάσταση</th>
                 <th>Ενέργεια</th>
                 </thead>

                 <tbody id="tbody1">
                      <tr>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td>
                            </a>
                                <button th:href="@{http://localhost:8080/deleteRequest/{requestId}}" class="btn"> Delete </button>
                          </td>
                </tbody>
             </table>

            <div id="searchAllRequestsArea"></div>
            <script>
                window.addEventListener('load', (event) => {
                    const xhr = new XMLHttpRequest();
                    xhr.open('GET', 'http://localhost:8080/requests', true);
                    xhr.onreadystatechange = function() {


                        if (xhr.readyState == 4) {
                            if (xhr.status == 200) {


                                let divElem = document.getElementById('searchAllRequestsArea');


                                while (divElem.firstChild) {
                                    divElem.removeChild(divElem.firstChild);
                                }

                                const results = JSON.parse(xhr.responseText);
                            }
                        }
                    }
                        //initialize the row to use it on displayDetails function
                        var row=1;
                        //use this function to  create a dynamic array
                        function displayDetails(){
                            var display = document.getElementById("display");
                            var newRow= display.insertRow(row);


                            var cell1 = newRow.insertCell(0);
                            var cell2 = newRow.insertCell(1);
                            var cell3 = newRow.insertCell(2);
                            var cell4 = newRow.insertCell(3);


                            cell1.innerHTML=document.getElementById('mark').value;
                            cell2.innerHTML=document.getElementById('dest').value;
                            cell3.innerHTML=document.getElementById('status').value;


                            row++;
                        }

                        // object requests
                        const requests={
                            'mark': document.getElementById('mark').value,
                            'dest':  document.getElementById('dest').value,
                            'status':  document.getElementById('status').value,
                        }




                });


                </script>

<!--            <table class="table">-->
<!--                <thead>-->
<!--                <tr>-->
<!--                    <th>Βαθμός</th>-->
<!--                    <th>Όνομα καθηγητή</th>-->
<!--                    <th>Ενέργεια</th>-->
<!--                </tr>-->
<!--                </thead>-->
<!--                <tbody>-->
<!--                <tr>-->
<!--                    <td th:text="${requests.mark}"></td>-->
<!--                    <td th:text="${requests.dest}"></td>-->
<!--                    <td>-->

<!--                        </a>-->
<!--                        <a th:href="@{http://localhost:8080/deleteRequest/{requestId})"-->
<!--                           class="btn btn-danger" style="color:white"> Delete-->
<!--                        </a>-->
<!--                    </td>-->

<!--                </tr>-->
<!--                </tbody>-->
<!--            </table>-->

        </div>
    </div>
</div>
</header>
</body>
</html>

